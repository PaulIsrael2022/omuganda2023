 <%- contentFor('HeaderCss') %>

    <%- contentFor('breadcrumb') %>

        <!-- start page title -->
        <div class="row">
            <div class="col-12">
                <div class="page-title-box d-sm-flex align-items-center
                    justify-content-between">
                    <h4 class="mb-sm-0 font-size-18">Record Clan Info</h4>

                    <div class="page-title-right">
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item"><a href="javascript:
                                    void(0);">Clan</a></li>
                            <li class="breadcrumb-item active">Form</li>
                        </ol>
                    </div>

                </div>
            </div>
        </div>
        <!-- end page title -->

        <%- contentFor('body') %>

            <div class="row">
              <div class="col-xl-12">
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title">Clan Info</h4>
                  </div>
                  
                  <div class="card-body">
              
                    <form id="clanForm" class="needs-validation" novalidate action="/clan/bio" method="POST">
              
                      <div class="row">
                        <div class="col-md-6">
                          <div class="mb-3">
                            <label class="form-label" for="clanName">Clan Name</label>
                            <input type="text" class="form-control" id="clanName" name="clanName" required>
                            <div class="invalid-feedback">
                              Please provide a clan name.
                            </div>  
                          </div>
                        </div>
              
                        <div class="col-md-6">
                          <div class="mb-3">
                            <label class="form-label" for="clanMotto">Clan Motto</label>
                            <input type="text" class="form-control" id="clanMotto" name="clanMotto" required>
                            <div class="invalid-feedback">
                              Please provide a clan motto.
                            </div>
                          </div>
                        </div>
                      </div>
              
                      <div class="row">
                        <div class="col-md-6">
                          <div class="mb-3">
                            <label class="form-label" for="clanEmail">Clan Email</label>
                            <input type="email" class="form-control" id="clanEmail" name="clanEmail" required>
                            <div class="invalid-feedback">
                              Please provide a valid email.
                            </div>
                          </div>
                        </div>
              
                        <div class="col-md-6">
                          <div class="mb-3">
                            <label class="form-label" for="clanDescription">Clan Description</label>    
                            <textarea class="form-control" id="clanDescription" name="clanDescription" rows="3" required></textarea>
                            <div class="invalid-feedback">
                              Please provide a clan description.
                            </div>
                          </div>
                        </div>
                      </div>
              
                      <div class="row">
                        <div class="col-md-12">
                          <div class="mb-3">
                            <label class="form-label" for="bio">Bio</label>
                            <textarea class="form-control" id="bio" name="bio" rows="5" required></textarea>
                            <div class="invalid-feedback">
                              Please provide a bio.
                            </div>
                          </div>  
                        </div>
                      </div>
              
                      <!-- <div class="row">
                        <div class="col-md-12">
                          <div class="mb-3">
                            <label class="form-label">Leadership Hierarchy</label>
                            <div id="leaders"></div> 
                            <button type="button" id="addLeader" class="btn btn-primary">Add Leader</button>
                          </div>
                        </div>
                      </div> -->
              
                      <button class="btn btn-primary" type="submit">Submit Form</button>
              
                    </form>
              
                  </div>
                </div>
              </div>
              
              <script>
              // Add leader entry  
              document.getElementById('addLeader').addEventListener('click', function() {
                var leaders = document.getElementById('leaders');
                var leaderIndex = leaders.childElementCount + 1;
                
                var row = document.createElement('div');
                row.className = 'row';
              
                var nameColumn = document.createElement('div');
                nameColumn.className = 'col-md-6';
              
                var nameGroup = document.createElement('div');
                nameGroup.className = 'mb-3';
              
                var nameLabel = document.createElement('label');
                nameLabel.setAttribute('for', 'leaderName'+leaderIndex);
                nameLabel.className = 'form-label';
                nameLabel.textContent = 'Leader Name';
              
                var nameInput = document.createElement('input');
                nameInput.type = 'text';
                nameInput.className = 'form-control';
                nameInput.id = 'leaderName'+leaderIndex;
                nameInput.name = 'leadershipHierarchy['+ (leaderIndex-1) +'][leaderName]';
                nameInput.required = true;
              
                nameGroup.appendChild(nameLabel);
                nameGroup.appendChild(nameInput);
                nameColumn.appendChild(nameGroup);
              
                var titleColumn = document.createElement('div');
                titleColumn.className = 'col-md-6';
              
                var titleGroup = document.createElement('div');  
                titleGroup.className = 'mb-3';
              
                var titleLabel = document.createElement('label');  
                titleLabel.setAttribute('for', 'leaderTitle'+leaderIndex);
                titleLabel.className = 'form-label'; 
                titleLabel.textContent = 'Leader Title';
              
                var titleInput = document.createElement('input');
                titleInput.type = 'text';
                titleInput.className = 'form-control';
                titleInput.id = 'leaderTitle'+leaderIndex; 
                titleInput.name = 'leadershipHierarchy['+ (leaderIndex-1) +'][title]';
              
                titleGroup.appendChild(titleLabel);
                titleGroup.appendChild(titleInput);
                titleColumn.appendChild(titleGroup);
              
                row.appendChild(nameColumn);
                row.appendChild(titleColumn);
              
                leaders.appendChild(row);
              
              });
              </script>

        <!-- Second Form -->
                <div class="col-xl-6">
                    <div class="card">
                      <div class="card-header">
  
                        <h4 class="card-title">Family Tree Form</h4>
                        
                        <p class="card-title-desc">
                          This form allows you to enter information about a person in your family tree.
                          The fields correspond to the Person schema defined in the Mongoose model.
                        </p>
                        
                        <p class="card-title-desc">
                          Validation is implemented to require certain fields. The clan head checkbox
                          dynamically shows/hides the years as clan head field.
                        </p>
                        
                      </div>
                        <div class="card-body">
                          <form class="needs-validation" novalidate>

                            <div class="mb-3">
                              <label for="name">Name</label>
                              <input type="text" class="form-control" id="name" name="name" required>
                            </div>
                          
                            <div class="mb-3">
                              <label for="dateOfBirth">Date of Birth</label> 
                              <input type="date" class="form-control" id="dateOfBirth" name="dateOfBirth" required>
                            </div>
                          
                            <div class="mb-3">
                              <label for="dateOfDeath">Date of Death</label>  
                              <input type="date" class="form-control" id="dateOfDeath" name="dateOfDeath">
                            </div>
                          
                            <div class="mb-3">
                              <label for="gender">Gender</label>
                              <select class="form-control" id="gender" name="gender" required>
                                <option value="">Select</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                              </select>
                            </div>
                          
                            <div class="mb-3">
                              <label for="placeOfBirth">Place of Birth</label>
                              <input type="text" class="form-control" id="placeOfBirth" name="placeOfBirth" required>
                            </div>
                          
                            <div class="mb-3 form-check">
                              <input type="checkbox" class="form-check-input" id="clanHead" name="clanHead">
                              <label class="form-check-label" for="clanHead">Clan Head</label>
                            </div>
                          
                            <div class="mb-3" id="yearsAsClanHeadField" style="display: none;">
                              <label for="yearsAsClanHead">Years as Clan Head</label>
                              <input type="number" class="form-control" id="yearsAsClanHead" name="yearsAsClanHead">
                            </div>
                            
                            <div class="mb-3">
                              <label for="generation">Generation</label>
                              <input type="number" class="form-control" id="generation" name="generation" required>
                            </div>

                            <div class="mb-3">
                              <label for="parent">Parent</label>
                              <select class="form-control" id="parent" name="parent">
                                <option value="">Select</option>
                              </select>
                            </div>
                          
                            <button type="submit" class="btn btn-primary">Submit</button>
                          
                          </form>
                          
                          <script>
                          // Show/hide years as clan head field based on clan head checkbox
                          const clanHeadCheckbox = document.getElementById('clanHead');
                          const yearsAsClanHeadField = document.getElementById('yearsAsClanHeadField');
                          
                          clanHeadCheckbox.addEventListener('change', () => {
                            if (clanHeadCheckbox.checked) {
                              yearsAsClanHeadField.style.display = 'block';
                            } else {
                              yearsAsClanHeadField.style.display = 'none';
                            } 
                          });
                          
                          // Form validation
                          const form = document.querySelector('.needs-validation');
                          
                          form.addEventListener('submit', (event) => {
                          
                            if (!form.checkValidity()) {
                              event.preventDefault();
                              event.stopPropagation();
                            }
                            
                            form.classList.add('was-validated');
                          });
                          </script>
                        </div>
                    </div>
                    <!-- end card -->
                </div> <!-- end col -->
            </div>
            <!-- end row -->

                    <%- contentFor('FooterJs') %>

                        <!-- pristine js -->
                        <script
                            src="public/assets/libs/pristinejs/pristine.min.js"></script>
                        <!-- form validation -->
                        <script
                            src="public/assets/js/pages/form-validation.init.js"></script>
                        <%- contentFor('BottomJs') %>